---
title: "Pitch Range"
---

<WorkInProgress />

# Pitch Range

## About
In audio, pitch refers to the perception of a musical note's frequency. The perceived pitch determines whether a note sounds high or low. Increasing a note's pitch raises its frequency, making it sound higher, while decreasing a note's pitch lowers its frequency, making it sound lower. This process of altering a note's pitch is known as "pitch shifting".

## Pitch Shift Limitations
In *Ocarina of Time* and *Majora's Mask*, audio samples — along with the instruments that utilize them — are limited in the range their pitch can be increased. The pitch of an audio sample can only be increased up to two octaves (24 semitones) above its root note.

### Pitch Shift Limit for Channel-Based Instruments

<Stub />

<Tabs>
    <TabItem value="oot" label="Ocarina of Time" default>

    <Details summary="Piano" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Mid Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Piano | 69 | 84 | 96 |
    | Harpsichord | — | 79 | — |

    </Details>

    <Details summary="Chromatic Percussion" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Glockenspiel | — | 95 | — |
    | Marimba | — | 98 | — |
    | Church Bell | — | — | — |

    </Details>

    <Details summary="Organs" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Church Organ | — | — | — |
    | Harmonica | — | — | — |
    | Bandoneon | — | — | — |

    </Details>

    <Details summary="Guitars" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Nylon Str Guitar | — | — | — |
    | Sustain E. Guitar | — | — | — |

    </Details>

    <Details summary="Strings" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Violin | — | — | — |
    | Pizz. Strings | — | — | — |
    | Harp | — | — | — |
    | Timpani | — | — | — |

    </Details>

    <Details summary="Ensemble" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Strings | — | — | — |
    | Female Choir | — | — | — |
    | Male Choir | — | — | — |
    | Malon Voice | — | — | — |

    </Details>

    <Details summary="Brass" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Trumpet | — | — | — |
    | Trombone | — | — | — |
    | Tuba | — | — | — |
    | French Horn | — | — | — |

    </Details>

    <Details summary="Reed" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Oboe | — | — | — |
    | Bassooon | — | — | — |
    | Clarinet | — | — | — |

    </Details>

    <Details summary="Pipe" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Piccolo | — | — | — |
    | Ocarina | — | — | — |

    </Details>

    <Details summary="Synth" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | DIGI PAD 04 | — | — | — |
    | SYNFantasia3 | — | — | — |

    </Details>

    <Details summary="Ethnic" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Banjo | — | — | — |

    </Details>

    <Details summary="Percussive" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Steel Drums | — | — | — |

    </Details>

    <Details summary="Misc." className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    |  | — | — | — |

    </Details>

    </TabItem>

    <TabItem value="mm" label="Majora's Mask">

    <Details summary="Piano" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Mid Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Piano | 69 | 84 | 96 |
    | Harpsichord | — | 79 | — |

    </Details>

    <Details summary="Chromatic Percussion" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Glockenspiel | — | 95 | — |
    | Marimba | — | 98 | — |
    | Church Bell | — | — | — |

    </Details>

    <Details summary="Organs" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Electric Organ | — | — | — |
    | Harmonica | — | — | — |
    | Bandoneon | — | — | — |

    </Details>

    <Details summary="Guitars" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Nylon Str Guitar | — | — | — |
    | Steel Str Guitar | — | — | — |
    | Sustain E. Guitar | — | — | — |

    </Details>

    <Details summary="Strings" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Violin | — | — | — |
    | Pizz. Strings | — | — | — |
    | Harp | — | — | — |
    | Timpani | — | — | — |

    </Details>

    <Details summary="Ensemble" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Strings | — | — | — |
    | Female Choir | — | — | — |
    | Male Choir | — | — | — |
    | Lulu & Romani Voice | — | — | — |

    </Details>

    <Details summary="Brass" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Trumpet | — | — | — |
    | Trombone | — | — | — |
    | Tuba | — | — | — |
    | French Horn | — | — | — |

    </Details>

    <Details summary="Reed" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Oboe | — | — | — |
    | Bassooon | — | — | — |
    | Clarinet | — | — | — |

    </Details>

    <Details summary="Pipe" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Piccolo | — | — | — |
    | Ocarina | — | — | — |

    </Details>

    <Details summary="Synth" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | DIGI PAD 04 | — | — | — |
    | SYNFantasia3 | — | — | — |

    </Details>

    <Details summary="Ethnic" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Banjo | — | — | — |

    </Details>

    <Details summary="Percussive" className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    | Steel Drums | — | — | — |

    </Details>

    <Details summary="Misc." className="z64-details">

    | Instrument Name | Max Key (Low Sample) | Max Key (Primary Sample) | Max Key (High Sample) |
    | :-- | :-: | :-: | :-: |
    |  | — | — | — |

    </Details>

    </TabItem>
</Tabs>


### Technical Details
To achieve a two-octave (24 semitone) pitch shift increase for audio samples, the playback code checks if the sample requires secondary processing.

The code[^1]<sup>,</sup>[^2] is as follows:

<Tabs groupId="decomp">
    <TabItem value="oot-decomp" label="Ocarina of Time Decompilation">

    ```c linenums="0" title="playback.c"
    void Audio_NoteSetResamplingRate(NoteSubEu* noteSubEu, float resamplingRateInput)
    {
        float resamplingRate = 0.0f;

        if (resamplingRateInput < 2.0f)
        {
            noteSubEu->bitField1.hasTwoParts = false;
            resamplingRate = CLAMP_MAX(resamplingRateInput, 1.99998f);
        }
        else
        {
            noteSubEu->bitField1.hasTwoParts = true;
            if (resamplingRateInput > 3.99996f)
            {
                resamplingRate = 1.99998f;
            }
            else
            {
                resamplingRate = resamplingRateInput * 0.5f;
            }
        }
        noteSubEu->resamplingRateFixedPoint = (signed long)(resamplingRate * 32768.0f);
    }
    ```

    </TabItem>

    <TabItem value="mm-decomp" label="Majora's Mask Decompilation">

    ```c linenums="0" title="playback.c"
    void AudioPlayback_NoteSetResamplingRate(NoteSampleState* sampleState, float resamplingRateInput)
    {
        float resamplingRate = 0.0f;

        if (resamplingRateInput < 2.0f)
        {
            sampleState->bitField1.hasTwoParts = false;
            resamplingRate = CLAMP_MAX(resamplingRateInput, 1.99998f);
        }
        else
        {
            sampleState->bitField1.hasTwoParts = true;
            if (resamplingRateInput > 3.99996f)
            {
                resamplingRate = 1.99998f;
            }
            else
            {
                resamplingRate = resamplingRateInput * 0.5f;
            }
        }
        sampleState->frequencyFixedPoint = (signed long)(resamplingRate * 32768.0f);
    }
    ```

    </TabItem>
</Tabs>

When an audio sample requires secondary processing, the synthesis driver — responsible for decompressing, resampling, and applying gain to audio samples — removes every other sample frame from it during processing. This effectively halves the sample rate, shortening its wavelength. As a result, the sound plays faster with a higher perceived pitch. This effect is similar to the Doppler Effect, where a sound moving faster through a medium has a higher pitch than one moving slower through the same medium.

:::info[Increasing Pitch Range]

While it is possible to modify the code handling pitch shifting to increase an audio sample's pitch further, this will distort the wavelength of the sample. Excessive distortion may result in undesirable sound quality.

:::

[^1]: Zelda Reverse Engineering Team, Ocarina of Time Decompilation Project, Github Repository, [ZeldaRET/oot](https://github.com/zeldaret/oot/tree/main), [playback.c#L108-L124](https://github.com/zeldaret/oot/blob/0c5282ba66bec5eba8f11fa5922b893b1deed7e7/src/audio/lib/playback.c#L108-L124)
[^2]: Zelda Reverse Engineering Team, Majora's Mask Decompilation Project, Github Repository, [ZeldaRET/mm](https://github.com/zeldaret/mm/tree/main), [playback.c#L133-L149](https://github.com/zeldaret/mm/blob/a4056abd3ca2028e8e2cd45b0201157da9d13963/src/audio/lib/playback.c#L133-L149)